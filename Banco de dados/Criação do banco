CREATE DATABASE MUSEU;
USE MUSEU;

-- Criando tabelas 
-- AUTORES
CREATE TABLE AUTORES (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(200),
    Nacionalidade CHAR(3)
);

-- ASSUNTOS
CREATE TABLE ASSUNTOS (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Assunto VARCHAR(500)
);

-- EDITORA
CREATE TABLE EDITORA (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Nome VARCHAR(200)
);

-- OBRA
CREATE TABLE OBRA (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Titulo_Principal VARCHAR(500),
    Capa VARCHAR(100),
    Local VARCHAR(100),
    Data VARCHAR(20),
    Desc_Fisica VARCHAR(500),
    Numero_Chamada VARCHAR(20),
    Chamada_Local VARCHAR(20),
    Titulo_Uniforme VARCHAR(200),
    ISBN CHAR(13),
    Serie VARCHAR(100),
    Edicao INT,
    Colecao VARCHAR(100),
    Notas_Gerais VARCHAR(500),
    ISSN CHAR(8),
    Volume INT,
    Periodicidade VARCHAR(50),
    Nome VARCHAR(200),
    Tipo VARCHAR(10),

    FK_Assunto_ID INT NOT NULL,
    FK_Editora_ID INT NOT NULL,
    FK_Autores_ID INT NOT NULL,

    FOREIGN KEY (FK_Assunto_ID) REFERENCES ASSUNTOS(ID),
    FOREIGN KEY (FK_Editora_ID) REFERENCES EDITORA(ID),
    FOREIGN KEY (FK_Autores_ID) REFERENCES AUTORES(ID)
);

-- EXEMPLAR
CREATE TABLE EXEMPLAR (
    Codigo INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    Disponibilidade VARCHAR(50),
    Numero INT,
    FK_OBRA_ID INT NOT NULL,

    FOREIGN KEY (FK_OBRA_ID) REFERENCES OBRA(ID)
);

-- SECUNDARIOS
CREATE TABLE SECUNDARIOS (
    ID INT NOT NULL AUTO_INCREMENT PRIMARY KEY,

    FK_OBRA_ID INT NOT NULL,
    FK_AUTORES_ID INT NOT NULL,

    FOREIGN KEY (FK_OBRA_ID) REFERENCES OBRA(ID),
    FOREIGN KEY (FK_AUTORES_ID) REFERENCES AUTORES(ID)
);
